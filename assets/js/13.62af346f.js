(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{212:function(n,t,r){"use strict";r.r(t);var e=r(28),s=Object(e.a)({},(function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[r("h2",{attrs:{id:"vue项目在本地开发过程中如何让外部客户访问"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue项目在本地开发过程中如何让外部客户访问"}},[n._v("#")]),n._v(" Vue项目在本地开发过程中如何让外部客户访问")]),n._v(" "),r("p",[n._v("使用FRP将本地（localhost）上正在开发的前端和后端服务穿透到阿里云服务器上\n使得外部客户可以通过阿里云代理而访问本地机器上的服务")]),n._v(" "),r("h2",{attrs:{id:"场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[n._v("#")]),n._v(" 场景")]),n._v(" "),r("p",[n._v("Vue前端项目运行在本地端口3000，Express后端运行在本地端口5000\n有一阿里云linux服务器，域名mlskd.cn")]),n._v(" "),r("h2",{attrs:{id:"配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),r("ol",[r("li",[r("p",[n._v("到https://github.com/fatedier/frp/releases下载阿里云服务端用的软件frp_0.32.1_linuf'rx_amd64.tar.gz以及客户端win10(本地电脑)用的软件frp_0.32.1_windows_amd64.zip")])]),n._v(" "),r("li",[r("p",[n._v("阿里云服务器端的配置")]),n._v(" "),r("p",[n._v("2.1 解压frp_0.32.1_linux_amd64.tar.gz后只需要保留frps.exe和frps.ini,将这两个文件放到linux服务器上某一文件夹下并对frps.ini做下面的配置frps.ini")]),n._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[n._v(" [common]\n bind_port = 7000\n dashboard_port = 7500\n token = wenliang\n dashboard_user = admin\n dashboard_pwd = admin\n vhost_http_port = 8080\n vhost_https_port = 10443\n \n [web]\n type = http\n auth_token = wenliang\n")])])]),r("p",[n._v("2.2 在frps.exe和frps.ini所在文件夹下执行 './fprs -c frps.ini' 命令")])]),n._v(" "),r("li",[r("p",[n._v("本地电脑端（客户端）的配置")]),n._v(" "),r("p",[n._v("3.1 解压frp_0.32.1_windows_amd64.zip后只需要保留frpc.exe和frpc.ini文件，将这两个文件放到本地电脑上某一文件夹下并对frpc.ini做下面的配置")]),n._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[n._v(" [common]\n server_addr = 39.100.99.20\n server_port = 7000\n token = wenliang\n \n [web]\n type = http\n local_port = 3000\n custom_domains = mlskd.cn\n      \n [web2]\n type = http\n local_port = 5000\n custom_domains = b.mlskd.cn\n")])])]),r("p",[n._v("3.2 在frpc.exe和frpc.ini所在文件夹下打开windows CMD窗口，执行 './frpc -c frpc.ini' 命令")])])]),n._v(" "),r("p",[n._v("经过上面步骤，用户访问mlskd.cn:8080 就可以访问到本地windows电脑上3000端口上的服务。访问localhost:7500可以看到frp管理页面。")]),n._v(" "),r("p",[n._v("几点注意事项：")]),n._v(" "),r("ul",[r("li",[r("p",[n._v("因为Vue项目是前后端分离的，本地3000端口上是前端服务，后端服务是在5000上，因此在frpc.ini里配置了[web2]，即前端代码中如果要请求后端就必须设置请求路径为b.mlskd.cn:8080。")])]),n._v(" "),r("li",[r("p",[n._v("前后端代码只需要将本地服务配置成localhost即可，前端main.js中配置vue_resource的请求根路径的时候需要配置成'"),r("a",{attrs:{href:"http://b.mlskd.cn:8080'%E3%80%82",target:"_blank",rel:"noopener noreferrer"}},[n._v("http://b.mlskd.cn:8080'。"),r("OutboundLink")],1)]),n._v(" "),r("p",[n._v("webpack.config.js的devServer中增加配置项 'disableHostCheck: true'")])]),n._v(" "),r("li",[r("p",[n._v("在linux中 用ps查看 frps进程号，用'kill -s 9 【进程PID】' 可以杀死进程")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);